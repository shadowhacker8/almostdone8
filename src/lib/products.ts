import type { Product } from '@/types/product'

// Complete static product data for Next.js static export
const staticProducts: Product[] = [
  {
    id: 'canon-camera-g7x-mark-iii',
    slug: 'canon-camera-g7x-mark-iii',
    title: 'Canon PowerShot G7 X Mark III 20.1MP Digital Point & Shoot Camera - Black',
    description: 'Tested, it works. It does have some scrapes and paint wear, which can be seen in the pictures. This doesn\'t affect the camera performance. The screen also has some scratches, which I provided a close-up picture of. The lens has some dust inside but no scratches. This doesn\'t affect the image quality. *No battery charger or cable* Includes - Battery (Original) - 256GB Memory Card',
    price: 599.95,
    rating: 5,
    reviewCount: 1,
    images: [
      '/products/canon-camera-g7x-mark-iii/img1.webp',
      '/products/canon-camera-g7x-mark-iii/img2.webp',
      '/products/canon-camera-g7x-mark-iii/img3.webp',
      '/products/canon-camera-g7x-mark-iii/img4.webp',
      '/products/canon-camera-g7x-mark-iii/img5.webp',
      '/products/canon-camera-g7x-mark-iii/img6.webp',
      '/products/canon-camera-g7x-mark-iii/img7.webp',
      '/products/canon-camera-g7x-mark-iii/img8.webp',
      '/products/canon-camera-g7x-mark-iii/img9.webp',
      '/products/canon-camera-g7x-mark-iii/img10.webp',
      '/products/canon-camera-g7x-mark-iii/img11.webp',
      '/products/canon-camera-g7x-mark-iii/img12.webp'
    ],
    condition: 'Used - Like New',
    category: 'Digital Cameras',
    brand: 'Canon',
    payeeEmail: 'happyemilliano@gmail.com',
    currency: 'USD',
    checkoutLink: 'https://buymeacoffee.com/annahoffman/extras/checkout/9f222fa7-139c-431c-897d-1f00b0fefd0f',
    meta: {
      title: 'Canon Camera G7X Mark III - Compact Digital Vlogging Camera',
      description: 'Discover the Canon PowerShot G7X Mark III, a premium compact digital camera perfect for vlogging and high-quality photos. Features 4K video, 20.1MP sensor, and livestreaming. Excellent condition.',
      keywords: 'Canon G7X Mark III, compact camera, digital camera, vlogging camera, 4K video, livestreaming, Canon PowerShot, used camera, photography'
    }
  },
  {
    id: 'meta-quest-3s-128gb-complete-set-excellent-condition',
    slug: 'meta-quest-3s-128gb-complete-set-excellent-condition',
    title: 'Meta Quest 3S 128GB â€“ Complete Set, Excellent Condition',
    description: 'This is a used Meta Quest 3S 128GB. The item has been previously owned and may show some signs of cosmetic wear, but it is fully functional and in nice condition. It features connectivity options including Bluetooth and WiFi. Manufactured in 2024, this device offers a storage capacity of 128GB. The brand is Meta.',
    price: 189.90,
    rating: 4.2,
    reviewCount: 5,
    images: [
      '/products/meta-quest-3s-128gb-complete-set-excellent-condition/img1.webp',
      '/products/meta-quest-3s-128gb-complete-set-excellent-condition/img2.webp'
    ],
    condition: 'Used - Excellent Condition',
    category: 'Virtual Reality',
    brand: 'Meta',
    payeeEmail: 'happyemilliano@gmail.com',
    currency: 'USD',
    checkoutLink: 'https://buymeacoffee.com/annahoffman/extras/checkout/9f225648-b89d-4b02-b3e0-9bc2d3f18a33',
    meta: {
      title: 'Meta Quest 3S 128GB - Complete VR Set in Excellent Condition',
      description: 'Explore virtual worlds with the Meta Quest 3S 128GB VR headset. This complete set offers immersive experiences and comes in excellent, well-maintained condition. Perfect for gaming, entertainment, and productivity.',
      keywords: 'Meta Quest 3S, VR headset, virtual reality, 128GB, complete set, used VR, Meta Quest, VR gaming, immersive experience'
    }
  },
  {
    id: 'ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed',
    slug: 'ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed',
    title: 'Ninja SLUSHi Frozen Drink Maker 3-in-1, 72oz, New Sealed',
    description: 'Brand new Ninja SLUSHi FS300 Frozen Drink Maker (sealed in original packaging). Features a 72 oz capacity, 3 speeds, and dishwasher safe parts. Made of durable ABS plastic in gray color. Runs on 120V electric power with 200W motor. Dimensions: 16.28 inch x 6.52 inch x 16.43 inch. Weighs 23.37 lbs. UPC/EAN: 622356633383. MPN: FS300.',
    price: 229.97,
    rating: 4.7,
    reviewCount: 553,
    images: [
      '/products/ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed/img1.webp',
      '/products/ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed/img2.webp',
      '/products/ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed/img3.webp',
      '/products/ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed/img4.webp',
      '/products/ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed/img5.webp',
      '/products/ninja-slushi-frozen-drink-maker-3-in-1-72-oz-new-sealed/img6.webp'
    ],
    condition: 'New',
    category: 'Frozen Drink & Slush Machines',
    brand: 'Ninja',
    payeeEmail: 'happyemilliano@gmail.com',
    currency: 'USD',
    checkoutLink: 'https://buymeacoffee.com/annahoffman/extras/checkout/9f224fcd-e307-4628-80b3-28751c0057fa',
    meta: {
      title: 'Ninja SLUSHi Frozen Drink Maker 3-in-1, 72oz, New Sealed - HappyDeel',
      description: 'Brand new Ninja SLUSHi FS300 Frozen Drink Maker (sealed in original packaging). Features a 72 oz capacity, 3 speeds, and dishwasher safe parts. Perfect for making frozen drinks, slushies, and smoothies.',
      keywords: 'Ninja SLUSHi, Frozen Drink Maker, 3-in-1, 72oz, New, Sealed, Slushie Machine, Smoothie Maker, Kitchen Appliance, HappyDeel'
    }
  },
  {
    id: 'oura-ring-gen-4-silver-size-9',
    slug: 'oura-ring-gen-4-silver-size-9',
    title: 'Oura Ring Gen 4 - Silver - Size 9',
    description: 'Tested, it works. It does have some scrapes and paint wear, which can be seen in the pictures. This doesn\'t affect the camera performance. The screen also has some scratches, which I provided a close-up picture of. The lens has some dust inside but no scratches. This doesn\'t affect the image quality. *No battery charger or cable* Includes - Battery (Original) - 256GB Memory Card',
    price: 179.99,
    rating: 4.2,
    reviewCount: 121,
    images: [
      '/products/oura-ring-gen-4-silver-size-9/img1.webp',
      '/products/oura-ring-gen-4-silver-size-9/img2.webp',
      '/products/oura-ring-gen-4-silver-size-9/img3.webp',
      '/products/oura-ring-gen-4-silver-size-9/img4.webp',
      '/products/oura-ring-gen-4-silver-size-9/img5.webp',
      '/products/oura-ring-gen-4-silver-size-9/img6.webp'
    ],
    condition: 'Used - Excellent Condition',
    category: 'Health & Personal Care',
    brand: 'Oura Ring',
    payeeEmail: 'happyemilliano@gmail.com',
    currency: 'USD',
    checkoutLink: 'https://buymeacoffee.com/annahoffman/extras/checkout/9f22512f-1751-4dde-a548-45501ff5eceb',
    meta: {
      title: 'Oura Ring Gen 4 (Silver, Size 9) - Smart Sleep & Activity Tracker',
      description: 'Get the Oura Ring Generation 4 in silver, size 9. This smart ring tracks sleep, activity, heart rate, and more to provide personalized health insights. Excellent used condition.',
      keywords: 'Oura Ring, Gen 4, smart ring, health tracker, sleep tracker, activity tracker, heart rate, wellness technology, silver Oura Ring, size 9'
    }
  },
  {
    id: 'sony-wh-1000xm5-wireless-noise-cancelling-headphones-black',
    slug: 'sony-wh-1000xm5-wireless-noise-cancelling-headphones-black',
    title: 'Sony WH-1000XM5 Wireless Noise Cancelling Headphones - Black',
    description: 'Pre-owned Sony WH-1000XM5 wireless noise cancelling headphones in black. Renowned for exceptional sound quality, industry-leading noise cancellation, and long battery life. Includes carrying case and charging cable. Fully tested and in excellent working condition with light cosmetic wear.',
    price: 336,
    rating: 4.6,
    reviewCount: 6,
    images: [
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img1.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img2.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img3.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img4.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img5.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img6.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img7.webp',
      '/products/sony-wh-1000xm5-wireless-noise-cancelling-headphones-black/img8.webp'
    ],
    condition: 'Used',
    category: 'Headphones',
    brand: 'Sony',
    payeeEmail: 'happyemilliano@gmail.com',
    currency: 'USD',
    checkoutLink: 'https://buymeacoffee.com/annahoffman/extras/checkout/9f22512f-1751-4dde-a548-45501ff5eceb',
    meta: {
      title: 'Sony WH-1000XM5 Wireless Noise Cancelling Headphones - Black - HappyDeel',
      description: 'Pre-owned Sony WH-1000XM5 wireless noise cancelling headphones in black. Renowned for exceptional sound quality, industry-leading noise cancellation, and long battery life. Includes carrying case and charging cable.',
      keywords: 'Sony WH-1000XM5, wireless headphones, noise cancelling, black headphones, used headphones, Sony, audio, HappyDeel'
    }
  }
]

// Cache products in memory for faster access
let productsCache: Product[] | null = null

export async function getProducts(): Promise<Product[]> {
  if (productsCache) {
    return productsCache
  }
  
  // For static export, use the static data
  productsCache = staticProducts
  return productsCache
}

export async function getProductBySlug(slug: string): Promise<Product | undefined> {
  if (!productsCache) {
    await getProducts()
  }
  return productsCache?.find(product => product.slug === slug)
}

export async function getFeaturedProducts(): Promise<Product[]> {
  if (!productsCache) {
    await getProducts()
  }
  return (productsCache || [])
    .sort((a, b) => b.rating - a.rating)
    .slice(0, 3)
}

export async function getRelatedProducts(slug: string): Promise<Product[]> {
  if (!productsCache) {
    await getProducts()
  }
  
  const currentProduct = productsCache?.find(p => p.slug === slug)
  
  if (!currentProduct) return []
  
  return (productsCache || [])
    .filter(product => 
      product.category === currentProduct.category && 
      product.slug !== slug
    )
    .slice(0, 3)
}